// import { CompactTable } from '@table-library/react-table-library/compact';



const nodes = [
    {
        "id": 1,
        "txnHash": "0x123Hei0001223dju...",
        "date": "15 days 4 hrs ago",
        "from": "Null Address: 0x00...00",
        "to": "0x45ty7632skjdbcbu...",
        "tokenID": 3,
        "profitLoss": "None",
        "type": "ERC-721"
    },
    {
        "id": 2,
        "txnHash": "0x123Hei0001223dju...",
        "date": "15 days 4 hrs ago",
        "from": "Null Address: 0x00...00",
        "to": "0x45ty7632skjdbcbu...",
        "tokenID": 3,
        "profitLoss": "None",
        "type": "ERC-721"
    },
    {
        "id": 3,
        "txnHash": "0x123Hei0001223dju...",
        "date": "15 days 4 hrs ago",
        "from": "Null Address: 0x00...00",
        "to": "0x45ty7632skjdbcbu...",
        "tokenID": 3,
        "profitLoss": "None",
        "type": "ERC-721"
    },
    {
        "id": 4,
        "txnHash": "0x123Hei0001223dju...",
        "date": "15 days 4 hrs ago",
        "from": "Null Address: 0x00...00",
        "to": "0x45ty7632skjdbcbu...",
        "tokenID": 3,
        "profitLoss": "None",
        "type": "ERC-721"
    },
    {
        "id": 5,
        "txnHash": "0x123Hei0001223dju...",
        "date": "15 days 4 hrs ago",
        "from": "Null Address: 0x00...00",
        "to": "0x45ty7632skjdbcbu...",
        "tokenID": 3,
        "profitLoss": "None",
        "type": "ERC-721"
    },
    {
        "id": 6,
        "txnHash": "0x123Hei0001223dju...",
        "date": "15 days 4 hrs ago",
        "from": "Null Address: 0x00...00",
        "to": "0x45ty7632skjdbcbu...",
        "tokenID": 3,
        "profitLoss": "None",
        "type": "ERC-721"
    },
    {
        "id": 7,
        "txnHash": "0x123Hei0001223dju...",
        "date": "15 days 4 hrs ago",
        "from": "Null Address: 0x00...00",
        "to": "0x45ty7632skjdbcbu...",
        "tokenID": 3,
        "profitLoss": "None",
        "type": "ERC-721"
    },
    {
        "id": 8,
        "txnHash": "0x123Hei0001223dju...",
        "date": "15 days 4 hrs ago",
        "from": "Null Address: 0x00...00",
        "to": "0x45ty7632skjdbcbu...",
        "tokenID": 3,
        "profitLoss": "None",
        "type": "ERC-721"
    },
    {
        "id": 9,
        "txnHash": "0x123Hei0001223dju...",
        "date": "15 days 4 hrs ago",
        "from": "Null Address: 0x00...00",
        "to": "0x45ty7632skjdbcbu...",
        "tokenID": 3,
        "profitLoss": "None",
        "type": "ERC-721"
    },
    {
        "id": 10,
        "txnHash": "0x123Hei0001223dju...",
        "date": "15 days 4 hrs ago",
        "from": "Null Address: 0x00...00",
        "to": "0x45ty7632skjdbcbu...",
        "tokenID": 3,
        "profitLoss": "None",
        "type": "ERC-721"
    },
    {
        "id": 11,
        "txnHash": "0x123Hei0001223dju...",
        "date": "15 days 4 hrs ago",
        "from": "Null Address: 0x00...00",
        "to": "0x45ty7632skjdbcbu...",
        "tokenID": 3,
        "profitLoss": "None",
        "type": "ERC-721"
    },
    {
        "id": 12,
        "txnHash": "0x123Hei0001223dju...",
        "date": "15 days 4 hrs ago",
        "from": "Null Address: 0x00...00",
        "to": "0x45ty7632skjdbcbu...",
        "tokenID": 3,
        "profitLoss": "None",
        "type": "ERC-721"
    },
    {
        "id": 13,
        "txnHash": "0x123Hei0001223dju...",
        "date": "15 days 4 hrs ago",
        "from": "Null Address: 0x00...00",
        "to": "0x45ty7632skjdbcbu...",
        "tokenID": 3,
        "profitLoss": "None",
        "type": "ERC-721"
    },
    {
        "id": 14,
        "txnHash": "0x123Hei0001223dju...",
        "date": "15 days 4 hrs ago",
        "from": "Null Address: 0x00...00",
        "to": "0x45ty7632skjdbcbu...",
        "tokenID": 3,
        "profitLoss": "None",
        "type": "ERC-721"
    },
    {
        "id": 15,
        "txnHash": "0x123Hei0001223dju...",
        "date": "15 days 4 hrs ago",
        "from": "Null Address: 0x00...00",
        "to": "0x45ty7632skjdbcbu...",
        "tokenID": 3,
        "profitLoss": "None",
        "type": "ERC-721"
    },
    {
        "id": 16,
        "txnHash": "0x123Hei0001223dju...",
        "date": "15 days 4 hrs ago",
        "from": "Null Address: 0x00...00",
        "to": "0x45ty7632skjdbcbu...",
        "tokenID": 3,
        "profitLoss": "None",
        "type": "ERC-721"
    },
    {
        "id": 17,
        "txnHash": "0x123Hei0001223dju...",
        "date": "15 days 4 hrs ago",
        "from": "Null Address: 0x00...00",
        "to": "0x45ty7632skjdbcbu...",
        "tokenID": 3,
        "profitLoss": "None",
        "type": "ERC-721"
    },
    {
        "id": 18,
        "txnHash": "0x123Hei0001223dju...",
        "date": "15 days 4 hrs ago",
        "from": "Null Address: 0x00...00",
        "to": "0x45ty7632skjdbcbu...",
        "tokenID": 3,
        "profitLoss": "None",
        "type": "ERC-721"
    },
    {
        "id": 19,
        "txnHash": "0x123Hei0001223dju...",
        "date": "15 days 4 hrs ago",
        "from": "Null Address: 0x00...00",
        "to": "0x45ty7632skjdbcbu...",
        "tokenID": 3,
        "profitLoss": "None",
        "type": "ERC-721"
    },
    {
        "id": 20,
        "txnHash": "0x123Hei0001223dju...",
        "date": "15 days 4 hrs ago",
        "from": "Null Address: 0x00...00",
        "to": "0x45ty7632skjdbcbu...",
        "tokenID": 3,
        "profitLoss": "None",
        "type": "ERC-721"
    },
    {
        "id": 21,
        "txnHash": "0x123Hei0001223dju...",
        "date": "15 days 4 hrs ago",
        "from": "Null Address: 0x00...00",
        "to": "0x45ty7632skjdbcbu...",
        "tokenID": 3,
        "profitLoss": "None",
        "type": "ERC-721"
    },
    {
        "id": 22,
        "txnHash": "0x123Hei0001223dju...",
        "date": "15 days 4 hrs ago",
        "from": "Null Address: 0x00...00",
        "to": "0x45ty7632skjdbcbu...",
        "tokenID": 3,
        "profitLoss": "None",
        "type": "ERC-721"
    },
    {
        "id": 23,
        "txnHash": "0x123Hei0001223dju...",
        "date": "15 days 4 hrs ago",
        "from": "Null Address: 0x00...00",
        "to": "0x45ty7632skjdbcbu...",
        "tokenID": 3,
        "profitLoss": "None",
        "type": "ERC-721"
    },
    {
        "id": 24,
        "txnHash": "0x123Hei0001223dju...",
        "date": "15 days 4 hrs ago",
        "from": "Null Address: 0x00...00",
        "to": "0x45ty7632skjdbcbu...",
        "tokenID": 3,
        "profitLoss": "None",
        "type": "ERC-721"
    },
    {
        "id": 25,
        "txnHash": "0x123Hei0001223dju...",
        "date": "15 days 4 hrs ago",
        "from": "Null Address: 0x00...00",
        "to": "0x45ty7632skjdbcbu...",
        "tokenID": 3,
        "profitLoss": "None",
        "type": "ERC-721"
    },
    {
        "id": 26,
        "txnHash": "0x123Hei0001223dju...",
        "date": "15 days 4 hrs ago",
        "from": "Null Address: 0x00...00",
        "to": "0x45ty7632skjdbcbu...",
        "tokenID": 3,
        "profitLoss": "None",
        "type": "ERC-721"
    }
]



import {
  Table,
  Header,
  HeaderRow,
  Body,
  Row,
  HeaderCell,
  Cell,
} from "@table-library/react-table-library/table";
import { useTheme } from "@table-library/react-table-library/theme";




const CreatedTable = () => {
  const data = { nodes };
  


  const theme = useTheme({
    
    // --data-table-library_grid-template-columns:  20% 12% 20% 14% 10% 12% minmax(150px, 1fr);


    Table: `

    --data-table-library_grid-template-columns:  25% 25% 25% 25% 25% 25%  minmax(150px, 1fr);
    

  `,


    
    BaseCell:`
    padding: 12px 10px;
    
    text-align : center;
    color : white;
    
    `,  
    
    HeaderRow: `
    background: rgba(0,0,0,0.7);
    
    font-size : 20px;
    line-height : 40px;
    font-weight : 700;

    `,

    Row: `
    background :transparent;

    font-weight : 500;
    font-size : 16px;
    line-height : 33px;
    
    
        &:nth-of-type(odd) {
        }

        &:nth-of-type(even) {
            
        }
      `,
  });


  const escapeCsvCell = (cell) => {
    if (cell == null) {
      return "";
    }
    const sc = cell.toString().trim();
    if (sc === "" || sc === '""') {
      return sc;
    }
    if (
      sc.includes('"') ||
      sc.includes(",") ||
      sc.includes("\n") ||
      sc.includes("\r")
    ) {
      return '"' + sc.replace(/"/g, '""') + '"';
    }
    return sc;
  };

  const makeCsvData = (columns, data) => {
    return data.reduce((csvString, rowItem) => {
      return (
        csvString +
        columns
          .map(({ accessor }) => escapeCsvCell(accessor(rowItem)))
          .join(",") +
        "\r\n"
      );
    }, columns.map(({ name }) => escapeCsvCell(name)).join(",") + "\r\n");
  };

  const downloadAsCsv = (columns, data, filename) => {
    const csvData = makeCsvData(columns, data);
    const csvFile = new Blob([csvData], { type: "text/csv" });
    const downloadLink = document.createElement("a");

    downloadLink.display = "none";
    downloadLink.download = filename;
    downloadLink.href = window.URL.createObjectURL(csvFile);
    document.body.appendChild(downloadLink);
    downloadLink.click();
    document.body.removeChild(downloadLink);
  };

  const handleDownloadCsv = () => {
    const columns = [
      { accessor: (item) => item.txnHash, name: "txnHash" },
      { accessor: (item) => item.date, name: "date" },
      { accessor: (item) => item.from, name: "from" },
      { accessor: (item) => item.to, name: "to" },
      { accessor: (item) => item.tokenID, name: "tokenID" },
      { accessor: (item) => item.profitLoss, name: "profitLoss" },
      { accessor: (item) => item.type, name: "type" },
    ];

    downloadAsCsv(columns, data.nodes, "report");
  };

  const handleLayoutChange = (widths) => console.log(widths);



  return (
    <div   >

<div style={{height:'600px'}} className="overflow-scroll">

    <Table  data={data} theme={theme}                 layout={{ onLayoutChange: handleLayoutChange ,custom: true,  fixedHeader: false }} 


 >
      {(tableList) => (
        <>
          <Header >
            <HeaderRow>
              <HeaderCell   resize >Txn Hash</HeaderCell>
              <HeaderCell   resize >Date</HeaderCell>
              <HeaderCell   resize >From</HeaderCell>
              <HeaderCell   resize >To</HeaderCell>
              <HeaderCell   resize >Token ID</HeaderCell>
              <HeaderCell   resize >Profit/Loss</HeaderCell>
              <HeaderCell   resize >Type</HeaderCell>
            
            </HeaderRow>
          </Header>

          <Body>
            {tableList.map((item) => (
              <Row key={item.id} item={item}>
                <Cell className="tableFirstCell">{item.txnHash}</Cell>
                <Cell>{item.date}</Cell>
                <Cell>{item.from}</Cell>
                <Cell>{item.to}</Cell>
                <Cell className="tableFirstCell">{item.tokenID}</Cell>
                <Cell>{item.profitLoss}</Cell>
                <Cell>{item.type}</Cell>
              </Row>
            ))}
          </Body>
        </>
      )}




    </Table>
    </div>


    <div className="flex items-end flex-col mt-2 mobile:mt-5 space-y-3">
        

        <div className="gap-x-2 font-bold mobile:flex-wrap mobile:justify-between mobile:gap-y-4 text-[15px] flex text-white">

        <div className="bg-[#5A555B] rounded-md  py-3 w-[53px] flex justify-center items-center">First</div>

        <div className="bg-[#5A555B] rounded-md  py-3 w-[53px] flex justify-center items-center">ic</div>


        <div className="bg-[#5A555B] rounded-md  py-3 w-[140px] flex justify-center items-center">Page 1 of 20</div>

        <div className="bg-[#5A555B] rounded-md  py-3 w-[53px] flex justify-center items-center">ic</div>


        <div className="bg-[#5A555B] rounded-md  py-3 w-[53px] flex justify-center items-center">Last</div>



        </div>


<div onClick={handleDownloadCsv} className="font-medium text-white cursor-pointer leading-12">&#123; Download <span className="font-bold text-[#A510FF]">CSV Export</span>&#125;</div>





    </div>



    </div>
  );
};

export default CreatedTable;
